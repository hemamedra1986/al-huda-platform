# ููุฎุต ูุธุงู ุงูุฅุฏุงุฑุฉ ุงูุดุงูู

## โจ ูุง ุชู ุฅุถุงูุชู

ุชู ุจูุงุก ูุธุงู ุฅุฏุงุฑุฉ ุดุงูู ููุงุจู ููุชูุณุน ูุณูุญ ูููุณุคูู ุจุงูุชุญูู ุงููุงูู ูู ุงููููุน.

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ ุงููุถุงูุฉ

### 1. ุฎุฏูุงุช (Services)

#### `app/lib/services/permissionService.ts`
- ูุธุงู ุงูุตูุงุญูุงุช ูุงูุฃุฏูุงุฑ (RBAC)
- ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ุงูุซูุงุซ: admin, moderator, user
- ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- ุงูุฏูุงู ุงูุฑุฆูุณูุฉ:
  - `hasPermission(role, permission)` - ุชุญูู ูู ุตูุงุญูุฉ ูุงุญุฏุฉ
  - `hasAllPermissions(role, permissions)` - ุชุญูู ูู ุตูุงุญูุงุช ูุชุนุฏุฏุฉ
  - `getPermissionsForRole(role)` - ุงุญุตู ุนูู ูู ุตูุงุญูุงุช ุงูุฏูุฑ
  - `createCustomPermissions()` - ุฃูุดุฆ ุตูุงุญูุงุช ูุฎุตุตุฉ
  - `validatePermissionUpdate()` - ุชุญูู ูู ุตุญุฉ ุชุนุฏูู ุงูุตูุงุญูุงุช

#### `app/lib/services/contentManagementService.ts`
- ุฅุฏุงุฑุฉ ุณูุฑ ุงููุฑุขู
- ุฅุฏุงุฑุฉ ุงูุฏูุฑุงุช ุงูุชุนููููุฉ
- ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ ูุงููุญุงุถุฑุงุช
- CRUD ูุงูู ูููุญุชูู
- ุงูุฏูุงู ุงูุฑุฆูุณูุฉ:
  - `getSurahs()` / `getSurah(id)`
  - `createSurah()` / `updateSurah()` / `deleteSurah()`
  - `getCourses()` / `getCourse(id)`
  - `createCourse()` / `updateCourse()` / `deleteCourse()`
  - `getCourseLessons()` / `createLesson()` / `deleteLesson()`

#### `app/lib/services/moderatorService.ts`
- ุฅุฏุงุฑุฉ ุงููุดุฑููู ูุงูุตูุงุญูุงุช
- ุฅุถุงูุฉ/ุญุฐู/ุชุนุฏูู ุงููุดุฑููู
- ุฅุฏุงุฑุฉ ุตูุงุญูุงุช ุงููุดุฑููู ุจุดูู ูุฑุฏู
- ุงูุฏูุงู ุงูุฑุฆูุณูุฉ:
  - `getModerators()` / `getModerator(id)`
  - `createModerator()` / `updateModerator()` / `deleteModerator()`
  - `addPermissionToModerator()` / `removePermissionFromModerator()`
  - `suspendModerator()` / `activateModerator()`

### 2. API Endpoints

#### `app/api/admin/moderators/route.ts`
- ุฅุฏุงุฑุฉ ุงููุดุฑููู ุนุจุฑ API
- ุงูุฅุฌุฑุงุกุงุช ุงููุฏุนููุฉ:
  - `GET` - ุงุญุตู ุนูู ูุงุฆูุฉ ุงููุดุฑููู
  - `POST` - ุฃุถู/ุญุฏูุซ/ุงุญุฐู ูุดุฑูููุ ุฃุถู/ุงุญุฐู ุตูุงุญูุงุช
  - ุงูุนูููุงุช: create, update, add-permission, remove-permission, suspend, activate, delete

#### `app/api/admin/content/route.ts`
- ุฅุฏุงุฑุฉ ุงููุญุชูู ุนุจุฑ API
- ุงูุฅุฌุฑุงุกุงุช ุงููุฏุนููุฉ:
  - `GET` - ุงุญุตู ุนูู ุงูุณูุฑ ูุงูุฏูุฑุงุช ูุงูุฏุฑูุณ
  - `POST` - ุฃุถู ูุญุชูู ุฌุฏูุฏ
  - `PUT` - ุญุฏูุซ ุงููุญุชูู
  - `DELETE` - ุงุญุฐู ุงููุญุชูู

### 3. ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

#### ุชุญุฏูุซุงุช `app/admin/page.tsx`
ุชู ุฅุถุงูุฉ ุชุจููุจุงุช ุฌุฏูุฏุฉ:

1. **ุชุจููุจ ุงููุดุฑููู** (๐จโ๐ผ Moderators)
   - ุนุฑุถ ุฌููุน ุงููุดุฑููู
   - ุฅุถุงูุฉ ูุดุฑู ุฌุฏูุฏ (ุงุณู + ุจุฑูุฏ ุฅููุชุฑููู)
   - ุฅุฏุงุฑุฉ ุตูุงุญูุงุช ูู ูุดุฑู ุจุดูู ูุฑุฏู
   - ุชูุนูู/ุฅููุงู ุงููุดุฑููู
   - ุญุฐู ุงููุดุฑููู
   - ุนุฑุถ ูุนูููุงุช ุชูุตูููุฉ (ุขุฎุฑ ุชุณุฌูู ุฏุฎููุ ุชุงุฑูุฎ ุงูุชุนูููุ ุฅูุฎ)

2. **ุชุจููุจ ุงููุญุชูู** (๐ Content)
   - ุนุฑุถ ุงูุณูุฑ ุงููุฑุขููุฉ (114 ุณูุฑุฉ)
   - ุชุญุฑูุฑ ุงูุณูุฑ
   - ุญุฐู ุงูุณูุฑ
   - ุฅุถุงูุฉ ุฏูุฑุงุช ุชุนููููุฉ ุฌุฏูุฏุฉ
   - ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ ูุงููุญุงุถุฑุงุช

---

## ๐ ุงูุตูุงุญูุงุช ุงููุชููุฑุฉ

```typescript
type Permission = 
  | "manage_users"           // ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
  | "manage_moderators"      // ุฅุฏุงุฑุฉ ุงููุดุฑููู
  | "manage_content"         // ุฅุฏุงุฑุฉ ุงููุญุชูู
  | "manage_quran"           // ุฅุฏุงุฑุฉ ุตูุชูุงุช ุงููุฑุขู
  | "manage_courses"         // ุฅุฏุงุฑุฉ ุงูุฏุฑูุณ
  | "manage_settings"        // ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช
  | "manage_donations"       // ุฅุฏุงุฑุฉ ุงูุชุจุฑุนุงุช
  | "manage_payments"        // ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช
  | "view_logs"              // ุนุฑุถ ุงูุณุฌูุงุช
  | "delete_content";        // ุญุฐู ุงููุญุชูู
```

---

## ๐งฉ ุงูุนูุงูุงุช ูุงูุชูุงููุงุช

### ุงูุชุณูุณู ุงููุฑูู:

```
Admin (ุงูุฅุฏุงุฑู)
โโโ Permissions (ูู ุงูุตูุงุญูุงุช)
โโโ Moderators Management
โ   โโโ ุฅูุดุงุก/ุชุนุฏูู/ุญุฐู ุงููุดุฑููู
โ   โโโ ุฅุนุทุงุก/ุณุญุจ ุงูุตูุงุญูุงุช
โโโ Content Management
    โโโ Surahs (ุงูุณูุฑ)
    โโโ Courses (ุงูุฏูุฑุงุช)
    โโโ Lessons (ุงูุฏุฑูุณ)

Moderator (ุงููุดุฑู)
โโโ Permissions (ุตูุงุญูุงุช ูุฎุตุตุฉ)
โโโ manage_content โ
โโโ manage_quran โ
โโโ manage_courses โ
โโโ view_logs โ

User (ุงููุณุชุฎุฏู ุงูุนุงุฏู)
โโโ No Permissions
```

---

## ๐ ุงูุจูุงูุงุช ุงูููููุฉ

ุชู ุงุณุชุฎุฏุงู ุจูุงูุงุช ููููุฉ (Mock Data) ูุฃุบุฑุงุถ ุงูุชุทููุฑ:

### ุงููุดุฑููู:
```javascript
{
  id: "mod-1",
  name: "ูุญููุฏ ุฃุญูุฏ",
  email: "mahmoud@example.com",
  role: "moderator",
  permissions: ["manage_content", "manage_quran", "view_logs"],
  status: "active",
  assignedBy: "admin",
  assignedAt: "2025-01-23T...",
  lastLogin: "2026-02-23T..."
}
```

### ุงูุณูุฑ:
```javascript
Array.from({ length: 114 }, (_, i) => ({
  id: `surah-${i + 1}`,
  number: i + 1,
  name: `Surah ${i + 1}`,
  verses: 1-286 (random),
}))
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุงููุตูู ุฅูู ููุญุฉ ุงูุชุญูู:
```
1. ุงูุชุญ http://localhost:3000/admin
2. ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ: admin123
3. ุงููุฑ ุนูู "ุฏุฎูู"
```

### ุฅุถุงูุฉ ูุดุฑู ุฌุฏูุฏ:
```
1. ุงุฐูุจ ุฅูู ุชุจููุจ "๐จโ๐ผ ุงููุดุฑููู"
2. ุงุถุบุท "โ ุฅุถุงูุฉ ูุดุฑู"
3. ุงุฏุฎู ุงูุงุณู ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู
4. ุงุฎุชุฑ ุงูุตูุงุญูุงุช ุงููุทููุจุฉ
5. ุณุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ ูู ุงูุณุฌู
```

### ุฅุถุงูุฉ ูุญุชูู:
```
1. ุงุฐูุจ ุฅูู ุชุจููุจ "๐ ุงููุญุชูู"
2. ุงุถุบุท "โ ุฅุถุงูุฉ ูุญุชูู"
3. ุงุฎุชุฑ ููุน ุงููุญุชูู (ุณูุฑุฉ/ุฏูุฑุฉ)
4. ุณุชุธูุฑ ุงูุณูุฑ ุงูููุฌูุฏุฉ ูู ุฌุฏูู
```

### ุชุญููู ุตูุชูุงุช ุงููุฑุขู:
```
1. ุงุฐูุจ ุฅูู ุชุจููุจ "๐ต ุตูุช ุงููุฑุขู"
2. ุงุฎุชุฑ ุงูุณูุฑุฉ (1-114)
3. ุงุฎุชุฑ ุงููุงุฑุฆ (ุงูุนูุงุณูุ ุงูููุดุงููุ ุฅูุฎ)
4. ุงุฎุชุฑ ููู MP3
5. ุงุถุบุท "๐ผ ุฑูุน ุงูููู"
```

---

## ๐ ุงูููุฒุงุช ุงูุฅุถุงููุฉ

โ **ูุงุฌูุฉ ุซูุงุฆูุฉ ุงููุบุฉ** - ุฏุนู ูุงูู ููุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ

โ **ุชุณุฌูู ุงูุฃูุดุทุฉ** - ุฌููุน ุงูุฅุฌุฑุงุกุงุช ุชูุณุฌู ูู ุงูุณุฌู

โ **ุงูุชุญูู ูู ุงูุตูุงุญูุงุช** - ููุน ููุญ ุตูุงุญูุงุช ุฃุนูู ูู ุงูููููุฉ

โ **ุญุงูุงุช ุจุตุฑูุฉ ูุงุถุญุฉ** - ุฃููุงู ูุฎุชููุฉ ููุญุงูุงุช (ูุดุทุ ูุนุทูุ ุฅูุฎ)

โ **ุชุฃููุฏ ุงูุญุฐู** - ูุงูุฐุฉ ุชุฃููุฏ ูุจู ุฃู ุญุฐู ููุงุฆู

โ **ูุนูููุงุช ููุตูุฉ** - ุนุฑุถ ุชุงุฑูุฎ ุงูุชุนูููุ ุขุฎุฑ ุชุณุฌูู ุฏุฎููุ ุฅูุฎ

---

## ๐ ุงูุชุทูุฑ ุงููุณุชูุจูู

### ุงููุฑุญูุฉ ุงููุงุฏูุฉ:

1. **Firebase Firestore Integration**
   - ุญูุธ ุฏุงุฆู ูููุดุฑููู ูุงูุตูุงุญูุงุช
   - ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุขููุฉ

2. **ูุธุงู ุงูุฅุดุนุงุฑุงุช**
   - ุฅุฎุทุงุฑุงุช ุจุฑูุฏ ุฅููุชุฑููู ุนูุฏ ุงุถุงูุฉ ูุดุฑู
   - ุชูุจููุงุช ุงูุฃูุดุทุฉ ุงูุญุณุงุณุฉ

3. **ููุญุฉ ุชุญูููุงุช ูุชูุฏูุฉ**
   - ุนุฏุฏ ุงูุตูุงุญูุงุช ุงููุณุชุฎุฏูุฉ
   - ุชูุงุฑูุฑ ุงููุดุฑููู
   - ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู

4. **ูุธุงู ุฃุฏูุงุฑ ูุชูุฏู**
   - ุฃุฏูุงุฑ ูุฎุตุตุฉ ุจุงููุงูู
   - ูููุฏ ุนูู ูุณุชูู ุงูุจูุงูุงุช

---

## ๐ ููุงุญุธุงุช ุนูู ุงูุชุทุจูู

- ุงูุจูุงูุงุช ุญุงููุงู **ูู ุงูุฐุงูุฑุฉ ููุท** (Mock Data)
- ุณูุชู ููุฏุงู ุงูุจูุงูุงุช ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู
- ููุฅูุชุงุฌ: ุงุณุชุฎุฏู Firebase Firestore ุฃู ูุงุนุฏุฉ ุจูุงูุงุช ุฃุฎุฑู

---

## ๐ ุงูุฏุนู

ูููุฒูุฏ ูู ุงููุนูููุงุชุ ุฑุงุฌุน:
- `ADMIN_SYSTEM_GUIDE.md` - ุฏููู ุงููุณุชุฎุฏู ุงูุดุงูู
- `app/lib/services/` - ุงูุฎุฏูุงุช ูุงูููุทู
- `app/api/admin/` - API Endpoints

---

**ุงูุฅุตุฏุงุฑ:** 2.0.0
**ุงูุชุงุฑูุฎ:** 23 ูุจุฑุงูุฑ 2026
**ุงูุญุงูุฉ:** โ ูุดุท
